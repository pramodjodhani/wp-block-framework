/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./svg/file.svg":
/*!**********************!*\
  !*** ./svg/file.svg ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ReactComponent": () => (/* binding */ SvgFile),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var _path;

function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }



var SvgFile = function SvgFile(props) {
  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg", _extends({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 80 80",
    width: 160,
    height: 160
  }, props), _path || (_path = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("path", {
    d: "M15 9v62h50V23.586L50.414 9Zm2 2h32v14h14v44H17Zm34 1.414L61.586 23H51ZM22 13c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Zm0 4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1Z"
  })));
};


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMDAwMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB2aWV3Qm94PSIwIDAgODAgODAiIHdpZHRoPSIxNjBweCIgaGVpZ2h0PSIxNjBweCI+PHBhdGggZD0iTSAxNSA5IEwgMTUgNzEgTCA2NSA3MSBMIDY1IDIzLjU4NTkzOCBMIDUwLjQxNDA2MyA5IFogTSAxNyAxMSBMIDQ5IDExIEwgNDkgMjUgTCA2MyAyNSBMIDYzIDY5IEwgMTcgNjkgWiBNIDUxIDEyLjQxNDA2MyBMIDYxLjU4NTkzOCAyMyBMIDUxIDIzIFogTSAyMiAxMyBDIDIxLjQ0OTIxOSAxMyAyMSAxMy40NDkyMTkgMjEgMTQgQyAyMSAxNC41NTA3ODEgMjEuNDQ5MjE5IDE1IDIyIDE1IEMgMjIuNTUwNzgxIDE1IDIzIDE0LjU1MDc4MSAyMyAxNCBDIDIzIDEzLjQ0OTIxOSAyMi41NTA3ODEgMTMgMjIgMTMgWiBNIDIyIDE3IEMgMjEuNDQ5MjE5IDE3IDIxIDE3LjQ0OTIxOSAyMSAxOCBDIDIxIDE4LjU1MDc4MSAyMS40NDkyMTkgMTkgMjIgMTkgQyAyMi41NTA3ODEgMTkgMjMgMTguNTUwNzgxIDIzIDE4IEMgMjMgMTcuNDQ5MjE5IDIyLjU1MDc4MSAxNyAyMiAxNyBaIE0gMjIgMjEgQyAyMS40NDkyMTkgMjEgMjEgMjEuNDQ5MjE5IDIxIDIyIEMgMjEgMjIuNTUwNzgxIDIxLjQ0OTIxOSAyMyAyMiAyMyBDIDIyLjU1MDc4MSAyMyAyMyAyMi41NTA3ODEgMjMgMjIgQyAyMyAyMS40NDkyMTkgMjIuNTUwNzgxIDIxIDIyIDIxIFogTSAyMiAyNSBDIDIxLjQ0OTIxOSAyNSAyMSAyNS40NDkyMTkgMjEgMjYgQyAyMSAyNi41NTA3ODEgMjEuNDQ5MjE5IDI3IDIyIDI3IEMgMjIuNTUwNzgxIDI3IDIzIDI2LjU1MDc4MSAyMyAyNiBDIDIzIDI1LjQ0OTIxOSAyMi41NTA3ODEgMjUgMjIgMjUgWiBNIDIyIDI5IEMgMjEuNDQ5MjE5IDI5IDIxIDI5LjQ0OTIxOSAyMSAzMCBDIDIxIDMwLjU1MDc4MSAyMS40NDkyMTkgMzEgMjIgMzEgQyAyMi41NTA3ODEgMzEgMjMgMzAuNTUwNzgxIDIzIDMwIEMgMjMgMjkuNDQ5MjE5IDIyLjU1MDc4MSAyOSAyMiAyOSBaIE0gMjIgMzMgQyAyMS40NDkyMTkgMzMgMjEgMzMuNDQ5MjE5IDIxIDM0IEMgMjEgMzQuNTUwNzgxIDIxLjQ0OTIxOSAzNSAyMiAzNSBDIDIyLjU1MDc4MSAzNSAyMyAzNC41NTA3ODEgMjMgMzQgQyAyMyAzMy40NDkyMTkgMjIuNTUwNzgxIDMzIDIyIDMzIFogTSAyMiAzNyBDIDIxLjQ0OTIxOSAzNyAyMSAzNy40NDkyMTkgMjEgMzggQyAyMSAzOC41NTA3ODEgMjEuNDQ5MjE5IDM5IDIyIDM5IEMgMjIuNTUwNzgxIDM5IDIzIDM4LjU1MDc4MSAyMyAzOCBDIDIzIDM3LjQ0OTIxOSAyMi41NTA3ODEgMzcgMjIgMzcgWiBNIDIyIDQxIEMgMjEuNDQ5MjE5IDQxIDIxIDQxLjQ0OTIxOSAyMSA0MiBDIDIxIDQyLjU1MDc4MSAyMS40NDkyMTkgNDMgMjIgNDMgQyAyMi41NTA3ODEgNDMgMjMgNDIuNTUwNzgxIDIzIDQyIEMgMjMgNDEuNDQ5MjE5IDIyLjU1MDc4MSA0MSAyMiA0MSBaIE0gMjIgNDUgQyAyMS40NDkyMTkgNDUgMjEgNDUuNDQ5MjE5IDIxIDQ2IEMgMjEgNDYuNTUwNzgxIDIxLjQ0OTIxOSA0NyAyMiA0NyBDIDIyLjU1MDc4MSA0NyAyMyA0Ni41NTA3ODEgMjMgNDYgQyAyMyA0NS40NDkyMTkgMjIuNTUwNzgxIDQ1IDIyIDQ1IFogTSAyMiA0OSBDIDIxLjQ0OTIxOSA0OSAyMSA0OS40NDkyMTkgMjEgNTAgQyAyMSA1MC41NTA3ODEgMjEuNDQ5MjE5IDUxIDIyIDUxIEMgMjIuNTUwNzgxIDUxIDIzIDUwLjU1MDc4MSAyMyA1MCBDIDIzIDQ5LjQ0OTIxOSAyMi41NTA3ODEgNDkgMjIgNDkgWiBNIDIyIDUzIEMgMjEuNDQ5MjE5IDUzIDIxIDUzLjQ0OTIxOSAyMSA1NCBDIDIxIDU0LjU1MDc4MSAyMS40NDkyMTkgNTUgMjIgNTUgQyAyMi41NTA3ODEgNTUgMjMgNTQuNTUwNzgxIDIzIDU0IEMgMjMgNTMuNDQ5MjE5IDIyLjU1MDc4MSA1MyAyMiA1MyBaIE0gMjIgNTcgQyAyMS40NDkyMTkgNTcgMjEgNTcuNDQ5MjE5IDIxIDU4IEMgMjEgNTguNTUwNzgxIDIxLjQ0OTIxOSA1OSAyMiA1OSBDIDIyLjU1MDc4MSA1OSAyMyA1OC41NTA3ODEgMjMgNTggQyAyMyA1Ny40NDkyMTkgMjIuNTUwNzgxIDU3IDIyIDU3IFogTSAyMiA2MSBDIDIxLjQ0OTIxOSA2MSAyMSA2MS40NDkyMTkgMjEgNjIgQyAyMSA2Mi41NTA3ODEgMjEuNDQ5MjE5IDYzIDIyIDYzIEMgMjIuNTUwNzgxIDYzIDIzIDYyLjU1MDc4MSAyMyA2MiBDIDIzIDYxLjQ0OTIxOSAyMi41NTA3ODEgNjEgMjIgNjEgWiBNIDIyIDY1IEMgMjEuNDQ5MjE5IDY1IDIxIDY1LjQ0OTIxOSAyMSA2NiBDIDIxIDY2LjU1MDc4MSAyMS40NDkyMTkgNjcgMjIgNjcgQyAyMi41NTA3ODEgNjcgMjMgNjYuNTUwNzgxIDIzIDY2IEMgMjMgNjUuNDQ5MjE5IDIyLjU1MDc4MSA2NSAyMiA2NSBaIi8+PC9zdmc+");

/***/ }),

/***/ "./src/fields/FileField.jsx":
/*!**********************************!*\
  !*** ./src/fields/FileField.jsx ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _svg_file_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../svg/file.svg */ "./svg/file.svg");





/**
 * Todo:
 * x Support non-image files
 * 2. multiple not working
 * 3. Saving not working.
 */

const FileField = props => {
  const isMultiple = props.multiple ? props.multiple : false;
  const allowedTypes = props.allowedTypes ? props.allowedTypes : ['image'];
  const [files, setFiles] = (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)([]);
  let value = [];
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (props.value) {
      setFiles(props.value);
    }
  }, []);
  (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (props.onChange) {
      props.onChange(files);
    }
  }, [files]);

  const onDelete = delete_id => {
    setFiles(files.filter(file => file.id !== delete_id));
  };

  return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__.MediaUploadCheck, null, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_1__.MediaUpload, {
    onSelect: media => {
      // @todo Looks odd
      if (!isMultiple) {
        setFiles([]);
      }

      setFiles([media]);
    },
    allowedTypes: allowedTypes,
    isMultiple: isMultiple,
    value: value,
    render: _ref => {
      let {
        open
      } = _ref;
      return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("ul", {
        className: "wpbf-image-field"
      }, files && files.map(file => {
        var _file$sizes;

        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("li", {
          key: file.id
        }, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
          className: "wpbc-image-field__image-wrap"
        }, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
          className: "wpbc-image-field__image-wrap-delete",
          onClick: () => onDelete(file.id)
        }, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Dashicon, {
          icon: "no"
        })), file !== null && file !== void 0 && (_file$sizes = file.sizes) !== null && _file$sizes !== void 0 && _file$sizes.thumbnail ? (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("img", {
          className: "wpbf-image-field__img",
          src: file.sizes.thumbnail.url
        }) : (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_svg_file_svg__WEBPACK_IMPORTED_MODULE_3__.ReactComponent, null)));
      })), (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_components__WEBPACK_IMPORTED_MODULE_2__.Button, {
        className: "button",
        onClick: open
      }, "Open Media Library"));
    }
  }));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FileField);

/***/ }),

/***/ "./src/fieldsGenerator.js":
/*!********************************!*\
  !*** ./src/fieldsGenerator.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/components */ "@wordpress/components");
/* harmony import */ var _wordpress_components__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_components__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _fields_FileField__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fields/FileField */ "./src/fields/FileField.jsx");




const FieldGenerator = {
  singleField: function (field, props, blockProps) {
    const fieldEdit = (e, id) => {
      props.setAttributes({
        [e.target.dataset.id]: e.target.value
      });
    };

    const setAttribute = (key, val) => {
      props.setAttributes({
        [key]: val
      });
    };

    const handleCheckoxChange = e => {
      const id = e.target.dataset.id;
      let currentValue = jQuery.isArray(props.attributes[id]) ? props.attributes[id] : [];

      if ('radio' === e.target.type) {
        currentValue = [];
      }

      if (e.target.checked) {
        currentValue.push(e.target.value);
      } else {
        currentValue = currentValue.filter(val => val !== e.target.value);
      }

      props.setAttributes({
        [id]: Array.from(new Set(currentValue))
      });
      console.log('currentValue', id, currentValue);
    };

    const htmlId = blockProps.id + '-' + field.id;
    let value = props.attributes[field.id] ? props.attributes[field.id] : field.default;

    switch (field.type) {
      case 'text':
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("input", {
          type: "text",
          id: htmlId,
          key: field.id,
          onChange: fieldEdit,
          "data-id": field.id,
          value: value
        });

      case 'select':
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("select", {
          key: field.id,
          onChange: fieldEdit,
          "data-id": field.id,
          defaultValue: value,
          id: htmlId
        }, field.choices && Object.entries(field.choices).map(_ref => {
          let [text, key] = _ref;
          return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("option", {
            key: key,
            value: key
          }, text);
        }));

      case 'date':
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("input", {
          type: "date",
          key: field.id,
          onChange: fieldEdit,
          "data-id": field.id,
          id: htmlId,
          value: value
        });

      case 'password':
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("input", {
          type: "password",
          key: field.id,
          onChange: fieldEdit,
          "data-id": field.id,
          id: htmlId,
          value: value
        });

      case 'textarea':
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("textarea", {
          type: "date",
          key: field.id,
          onChange: fieldEdit,
          "data-id": field.id,
          id: htmlId,
          value: value
        });

      case 'radio':
      case 'checkboxes':
      case 'checkbox':
        const type = 'radio' === field.type ? 'radio' : 'checkbox';
        value = jQuery.isArray(value) ? value : [];
        const name = blockProps.id + '-' + field.id;
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, field.choices && Object.entries(field.choices).map(_ref2 => {
          let [key, text] = _ref2;
          return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("label", {
            className: "wpbf-single-field__checkbox-label",
            key: key
          }, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("input", {
            id: htmlId,
            "data-id": field.id,
            type: type,
            value: key,
            "data-key": key,
            "data-text": text,
            name: name,
            onChange: handleCheckoxChange,
            checked: value.includes(key)
          }), text);
        }));

      case 'file':
      case 'image':
        // return <input key={field.id} id={htmlId} onChange={fieldEdit} data-id={field.id} value={value}></input>
        const multiple = field.multiple ? field.multiple : false;
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_fields_FileField__WEBPACK_IMPORTED_MODULE_2__["default"], {
          multiple: multiple,
          onChange: newVal => setAttribute(field.id, newVal),
          allowedTypes: field.allowed_types,
          value: value
        });

      case 'color':
        // @Todo
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("input", {
          type: "text",
          key: field.id,
          value: value,
          onChange: fieldEdit,
          id: htmlId
        });

      case 'editor':
        // @Todo
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("input", {
          type: "text",
          key: field.id,
          onChange: fieldEdit,
          id: htmlId,
          "data-id": field.id,
          value: value
        });

      /* case 'editor':
      	return <input key={field.id} onChange={fieldEdit} data-id={field.id} value={value}></input>			 */

      default:
        return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
          key: field.id
        }, " Default -", field.type, " - ", value);
    }
  }
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FieldGenerator);

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/***/ ((module) => {

module.exports = window["React"];

/***/ }),

/***/ "@wordpress/block-editor":
/*!*************************************!*\
  !*** external ["wp","blockEditor"] ***!
  \*************************************/
/***/ ((module) => {

module.exports = window["wp"]["blockEditor"];

/***/ }),

/***/ "@wordpress/blocks":
/*!********************************!*\
  !*** external ["wp","blocks"] ***!
  \********************************/
/***/ ((module) => {

module.exports = window["wp"]["blocks"];

/***/ }),

/***/ "@wordpress/components":
/*!************************************!*\
  !*** external ["wp","components"] ***!
  \************************************/
/***/ ((module) => {

module.exports = window["wp"]["components"];

/***/ }),

/***/ "@wordpress/element":
/*!*********************************!*\
  !*** external ["wp","element"] ***!
  \*********************************/
/***/ ((module) => {

module.exports = window["wp"]["element"];

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @wordpress/element */ "@wordpress/element");
/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @wordpress/blocks */ "@wordpress/blocks");
/* harmony import */ var _wordpress_blocks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _fieldsGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fieldsGenerator */ "./src/fieldsGenerator.js");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @wordpress/block-editor */ "@wordpress/block-editor");
/* harmony import */ var _wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__);





var blockFrameworkMain = {
  init: function () {
    if (!window.bf_blocks) {
      return;
    }

    for (const [block_id, block_data] of Object.entries(window.bf_blocks)) {
      this.register_block(block_id, block_data);
      console.log(block_id, block_data);
    }
  },
  register_block: function (block_id, data) {
    if (!data.fields || !jQuery.isArray(data.fields)) {
      data.fields = [];
    }

    const attributes = {};
    console.log('data', data);
    data.fields.forEach(field => {
      attributes[field.id] = {
        type: this.get_attribute_type_for_field(field)
      };
    });
    (0,_wordpress_blocks__WEBPACK_IMPORTED_MODULE_1__.registerBlockType)(block_id, {
      title: data.title,
      icon: data.icon,
      category: data.category,
      attributes: attributes,
      edit: props => this.edit(props, data),
      save: () => (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", null, "Hola dave, ", block_id, "!") // keywords: [], todo

    });
  },
  edit: (props, fieldData) => {
    let ret = [];
    const blockProps = (0,_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.useBlockProps)();
    console.log('props', props);
    (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
      jQuery('.wbf-single-field--color input').wpColorPicker();
    }, []);
    fieldData.fields.forEach(field => {
      field.htmlId = blockProps.id + '-' + field.id;
      ret.push((0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", {
        className: 'wbf-single-field wbf-single-field--' + field.id + ' wbf-single-field--' + field.type
      }, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("label", {
        htmlFor: field.htmlId
      }, field.title), _fieldsGenerator__WEBPACK_IMPORTED_MODULE_2__["default"].singleField(field, props, blockProps)));
    });
    return (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div", blockProps, ret, (0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_block_editor__WEBPACK_IMPORTED_MODULE_3__.InspectorControls, null, ret));
  },
  get_attribute_type_for_field: field => {
    if (['checkbox', 'checkboxes', 'radio', 'file'].includes(field.type)) {
      return 'array';
    }

    return 'string';
  }
};
blockFrameworkMain.init();
})();

/******/ })()
;
//# sourceMappingURL=index.js.map